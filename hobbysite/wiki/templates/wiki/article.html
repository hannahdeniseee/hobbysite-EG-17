{% extends 'wiki/base.html' %}
{% block title %}{{ article.title }}{% endblock %}

{% block content %}
<div class="article-container">

    <h1 class="article-title">{{ article.title }}</h1>
    <p class="article-meta">Created on {{ article.created_on }} | Updated on {{ article.updated_on }}</p>

    {% if is_owner %}
    <p><a href="{% url 'article_update' article.pk %}">Edit this article</a></p>
    {% endif %}

    <div class="article-image-box">
        <img src="https://picsum.photos/500/300" alt="{{ article.title }}" class="article-image">
    </div>

    <div class="article-entry">
        {{ article.entry }}  
    </div>
</div>

{% if related_articles %}
    <h2>Read more from {{ article.category.name }}</h2>
    <ul>
        {% for related in related_articles %}
            <li><a href="{% url 'article_detail' related.pk %}">{{ related.title }}</a></li>
        {% endfor %}
    </ul>
{% endif %}

<p><a href="{% url 'articles' %}">‚Üê Back to All Articles</a></p>

<h3>Comments</h3>
{% if user.is_authenticated %}
    <h4>Leave a Comment</h4>
    <form method="post">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">Post Comment</button>
    </form>
{% endif %}

{% if comments %}
    <ul>
        {% for comment in comments %}
            <li>
                <strong>{{ comment.author.username }}</strong> 
                <em>on {{ comment.created_on|date:"M d, Y H:i" }}</em>
                <p>{{ comment.body }}</p>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No comments yet.</p>
{% endif %}

{% endblock %}
